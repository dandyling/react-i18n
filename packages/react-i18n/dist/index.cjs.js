"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),r=(e=t)&&"object"==typeof e&&"default"in e?e.default:e;const n=(e,t)=>{const r=[];let n;const o=RegExp(e,"g");for(;null!==(n=o.exec(t));)r.push({offsets:[n.index,n.index+n[0].length],array:n});return r},o=(e,t)=>e.match.offsets[0]-t.match.offsets[0],s=(e,t)=>{if(!t.length)return[e];const r=[],s=[];let a=e;if(t.forEach(e=>{n(e.pattern,a).forEach(t=>{const r=Array.from({length:t.array[0].length}).map(()=>" ").join("");a=a.replace(t.array[0],r),s.push({match:t,rule:e})})}),a===e)return[e];a=e;let l=0;return s.sort(o).forEach((e,t)=>{const[n,o]=e.match.offsets,c=a.substring(l,n);if(c&&r.push(c),r.push(e.rule.onMatch(e.match.array,t)),l=o,t+1===s.length){const e=a.substring(l);e&&r.push(e)}}),r},a={pattern:/(\*\*|__)(.*?)\1/,onMatch:(e,t)=>r.createElement("strong",{key:t},e[2])},l={pattern:/(\*|_)(.*?)\1/,onMatch:(e,t)=>r.createElement("em",{key:t},e[2])},c={pattern:/~~(.*?)~~/,onMatch:(e,t)=>r.createElement("del",{key:t},e[1])},u={pattern:/`(.*?)`/,onMatch:(e,t)=>r.createElement("code",{key:t},e[1])},i={pattern:/\[([^\[]+)\]\(([^\)]+)\)/,onMatch:(e,t)=>r.createElement("a",{key:t,href:e[2]},e[1])},f=[a,l,u,c,i],h=t.createContext(void 0),p=()=>t.useContext(h),d=e=>{const{bundles:n,children:o,markdownRules:s,lang:a}=e,l=p();let c,u,i={},f=[];l&&(i=l.bundle,c=l.lang,u=l.resolveLanguageBundle,f=l.markdownRules);const d=(s||[]).filter(e=>!f.includes(e)).concat(f),[m,g]=t.useState(),x=a||c;if(!x)throw Error("No `lang` prop specified");t.useEffect(()=>{g(void 0)},[a]);const b=t.useCallback(e=>Promise.all([new Promise(t=>{i&&e===c?t(i):u?u(x).then(t):t({})}),new Promise(t=>{n&&n[e]?n[e]().then(t):t({})})]).then(e=>{let t={};return e.forEach(e=>{t=Object.assign(Object.assign({},t),e)}),t}),[x,c,i,n,u]);return t.useEffect(()=>{m||b(x).then(g)},[m,x,i,n,b]),m?r.createElement(h.Provider,{value:{resolveLanguageBundle:b,lang:x,bundle:m,markdownRules:d}},o):null};d.defaultProps={markdownRules:f},exports.BoldRule=a,exports.DefaultMarkdownRules=f,exports.I18NProvider=d,exports.InlineCodeRule=u,exports.ItalicRule=l,exports.LinkRule=i,exports.StrikethroughRule=c,exports.findRegex=n,exports.formatCurrency=(e,t,r={style:"currency"},n)=>new Intl.NumberFormat(n,Object.assign(Object.assign({},r),{currency:t})).format(e),exports.formatDate=(e,t,r)=>new Intl.DateTimeFormat(r,t).format(e),exports.pluralize=(e,t,r,n)=>{const o=new Intl.PluralRules(n).select(e);switch(o){case"one":return`${e} ${t}`;case"other":return`${e} ${r}`}throw Error(`Unable to match ${o}.`)},exports.transform=s,exports.useI18N=p,exports.withI18N=function(e,n){return t.forwardRef((t,o)=>{const{bundle:a,markdownRules:l}=p();let c=t;if(a&&t[n]){const e=t[n];let r="";if(e.constructor===Array){const[t,...n]=e;a[t]&&(r=a[t](...n))}else r=a[e],r||console.warn("No i18n value found for key: "+e);r&&(r=s(r,l),c=Object.assign(Object.assign({},t),{children:r}))}return r.createElement(e,Object.assign({},c,{ref:o}))})};
