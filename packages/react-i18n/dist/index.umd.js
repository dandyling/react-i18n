var e,t;e=this,t=function(e,t){"use strict";var n="default"in t?t.default:t;const r=(e,t)=>{const n=[];let r;const a=RegExp(e,"g");for(;null!==(r=a.exec(t));)n.push({offsets:[r.index,r.index+r[0].length],array:r});return n},a=(e,t)=>e.match.offsets[0]-t.match.offsets[0],l=(e,t)=>{if(!t.length)return[e];const n=[],l=[];let o=e;if(t.forEach(e=>{r(e.pattern,o).forEach(t=>{const n=Array.from({length:t.array[0].length}).map(()=>" ").join("");o=o.replace(t.array[0],n),l.push({match:t,rule:e})})}),o===e)return[e];o=e;let s=0;return l.sort(a).forEach((e,t)=>{const[r,a]=e.match.offsets,c=o.substring(s,r);if(c&&n.push(c),n.push(e.rule.onMatch(e.match.array)),s=a,t+1===l.length){const e=o.substring(s);e&&n.push(e)}}),n},o={pattern:/(\*\*|__)(.*?)\1/,onMatch:e=>n.createElement("strong",null,e[2])},s={pattern:/(\*|_)(.*?)\1/,onMatch:e=>n.createElement("em",null,e[2])},c={pattern:/~~(.*?)~~/,onMatch:e=>n.createElement("del",null,e[1])},u={pattern:/`(.*?)`/,onMatch:e=>n.createElement("code",null,e[1])},f={pattern:/\[([^\[]+)\]\(([^\)]+)\)/,onMatch:e=>n.createElement("a",{href:e[2]},e[1])},i=[o,s,u,f,c],d=t.createContext(void 0),h=()=>t.useContext(d),m=e=>{const{bundles:r,children:a,markdownRules:l,lang:o}=e,s=h();let c,u,f={},i=[];s&&(f=s.bundle,c=s.lang,u=s.resolveLanguageBundle,i=s.markdownRules);const m=(l||[]).filter(e=>!i.includes(e)).concat(i),[g,p]=t.useState(),b=o||c;if(!b)throw Error("No `lang` prop specified");t.useEffect(()=>{p(void 0)},[e.lang]);const w=t.useCallback(e=>Promise.all([new Promise(t=>{f&&e===c?t(f):u?u(b).then(t):t({})}),new Promise(t=>{r&&r[e]?r[e]().then(t):t({})})]).then(e=>{let t={};return e.forEach(e=>{t=Object.assign(Object.assign({},t),e)}),t}),[b,c,f,r,u]);return t.useEffect(()=>{g||w(b).then(p)},[g,b,f,r,w]),g?n.createElement(d.Provider,{value:{resolveLanguageBundle:w,lang:b,bundle:g,markdownRules:m}},a):null};m.defaultProps={markdownRules:i},e.BoldRule=o,e.DefaultMarkdownRules=i,e.I18NProvider=m,e.InlineCodeRule=u,e.ItalicRule=s,e.LinkRule=f,e.StrikethroughRule=c,e.findRegex=r,e.formatCurrency=(e,t,n={style:"currency"},r)=>new Intl.NumberFormat(r,Object.assign(Object.assign({},n),{currency:t})).format(e),e.formatDate=(e,t,n)=>new Intl.DateTimeFormat(n,t).format(e),e.pluralize=(e,t,n,r)=>{const a=new Intl.PluralRules(r).select(e);switch(a){case"one":return`${e} ${t}`;case"other":return`${e} ${n}`}throw Error(`Unable to match ${a}.`)},e.transform=l,e.useI18N=h,e.withI18N=function(e,r){return t.forwardRef((t,a)=>{const{bundle:o,markdownRules:s}=h();let c=t;if(o&&t[r]){const e=t[r];let n="";if(e.constructor===Array){const[t,...r]=e;o[t]&&(n=o[t](...r))}else n=o[e],n||console.warn("No i18n value found for key: "+e);n&&(n=l(n,s),c=Object.assign(Object.assign({},t),{children:n}))}return n.createElement(e,Object.assign({},c,{ref:a}))})},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).ReactI18N={},e.React);
