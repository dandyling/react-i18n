var e,t;e=this,t=function(e,t){"use strict";const n=(e,t)=>{const n=[];let r;const a=RegExp(e,"g");for(;null!==(r=a.exec(t));)n.push({offsets:[r.index,r.index+r[0].length],array:r});return n},r=(e,t)=>e.match.offsets[0]-t.match.offsets[0],a=(e,t)=>{if(!t.length)return[e];const a=[],o=[];let l=e;if(t.forEach(e=>{n(e.pattern,l).forEach(t=>{const n=Array.from({length:t.array[0].length}).map(()=>" ").join("");l=l.replace(t.array[0],n),o.push({match:t,rule:e})})}),l===e)return[e];l=e;let s=0;return o.sort(r).forEach((e,t)=>{const[n,r]=e.match.offsets,c=l.substring(s,n);if(c&&a.push(c),a.push(e.rule.onMatch(e.match.array)),s=r,t+1===o.length){const e=l.substring(s);e&&a.push(e)}}),a},o={pattern:/(\*\*|__)(.*?)\1/,onMatch:e=>t.createElement("strong",null,e[2])},l={pattern:/(\*|_)(.*?)\1/,onMatch:e=>t.createElement("em",null,e[2])},s={pattern:/~~(.*?)~~/,onMatch:e=>t.createElement("del",null,e[1])},c={pattern:/`(.*?)`/,onMatch:e=>t.createElement("code",null,e[1])},u={pattern:/\[([^\[]+)\]\(([^\)]+)\)/,onMatch:e=>t.createElement("a",{href:e[2]},e[1])},f=[o,l,c,u,s],i=t.createContext(void 0),h=()=>t.useContext(i),d=e=>{const{bundles:n,children:r,markdownRules:a,lang:o}=e,l=h();let s,c,u={},f=[];l&&(u=l.bundle,s=l.lang,c=l.resolveLanguageBundle,f=l.markdownRules);const d=(a||[]).filter(e=>!f.includes(e)).concat(f),[m,g]=t.useState(),p=o||s;if(!p)throw Error("No `lang` prop specified");t.useEffect(()=>{g(void 0)},[e.lang]);const b=t.useCallback(e=>Promise.all([new Promise(t=>{u&&e===s?t(u):c?c(p).then(t):t({})}),new Promise(t=>{n&&n[e]?n[e]().then(t):t({})})]).then(e=>{let t={};return e.forEach(e=>{t=Object.assign(Object.assign({},t),e)}),t}),[p,s,u,n,c]);return t.useEffect(()=>{m||b(p).then(g)},[m,p,u,n,b]),m?t.createElement(i.Provider,{value:{resolveLanguageBundle:b,lang:p,bundle:m,markdownRules:d}},r):null};d.defaultProps={markdownRules:f},e.BoldRule=o,e.DefaultMarkdownRules=f,e.I18NProvider=d,e.InlineCodeRule=c,e.ItalicRule=l,e.LinkRule=u,e.StrikethroughRule=s,e.findRegex=n,e.formatCurrency=(e,t,n={style:"currency"},r)=>new Intl.NumberFormat(r,Object.assign(Object.assign({},n),{currency:t})).format(e),e.formatDate=(e,t,n)=>new Intl.DateTimeFormat(n,t).format(e),e.pluralize=(e,t,n,r)=>{const a=new Intl.PluralRules(r).select(e);switch(a){case"one":return`${e} ${t}`;case"other":return`${e} ${n}`}throw Error(`Unable to match ${a}.`)},e.transform=a,e.useI18N=h,e.withI18N=function(e,n){return t.forwardRef((r,o)=>{const{bundle:l,markdownRules:s}=h();let c=r;if(l&&r[n]){const e=r[n];let t="";if(e.constructor===Array){const[n,...r]=e;l[n]&&(t=l[n](...r))}else t=l[e],t||console.warn("No i18n value found for key: "+e);t&&(t=a(t,s),c=Object.assign(Object.assign({},r),{children:t}))}return t.createElement(e,Object.assign({},c,{ref:o}))})},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).ReactI18N={},e.React);
